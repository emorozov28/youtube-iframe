"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;class LazyYouTubeLoad{constructor({selector:e,button:t=null,bgImage:o=!0,qualityBg:i="hqdefault"}){this.selector=e,this.qualityBg=i,this.button=t,this.bgImage=o,this.captionText=[],this.init()}init(){const e=document.querySelectorAll(this.selector);if(e&&0===e.length)throw new Error(`Selector "${this.selector}" not found`);e.forEach(t=>{const o=t.getAttribute("data-video-link"),i="https://youtu.be/".length,r=o.substring(i,o.length);t.querySelector(".video-play").innerHTML=this.button,this.isBgImage(t,r),t.addEventListener("click",o=>{t.querySelector(".video-caption")?this.captionText.push(t.querySelector(".video-caption").textContent):this.captionText.push(null),e.forEach(e=>{if(e.querySelector("iframe")){e.querySelector("iframe").remove();const t=this.captionText[this.captionText.length-2],o=()=>null!==t?`<span class="video-caption">${this.captionText[this.captionText.length-2]}</span>`:"",i=`\n                            <button class="btn-video-play video-play">${this.button}</button>\n                            ${o()}\n                        `;e.innerHTML=i}}),o.preventDefault();const i=this.createIframe(r,1);t.appendChild(i),t.querySelector(".video-play")&&t.querySelector(".video-play").remove(),t.querySelector(".video-caption")&&t.querySelector(".video-caption").remove()})})}generateUrl(e,t){return`https://www.youtube.com/embed/${e}${`?rel=0&showinfo=0&autoplay=${t}`}`}createIframe(e,t){const o=document.createElement("iframe");return o.setAttribute("allowfullscreen",""),o.setAttribute("allow","autoplay; encrypted-media"),o.setAttribute("src",this.generateUrl(e,t)),o}isBgImage(e,t){if(this.bgImage){const o=`https://i.ytimg.com/vi/${t}/${this.qualityBg}.jpg`;console.log(o),e.style.backgroundImage=`url(${o})`}else e.removeAttribute("style")}}exports.default=LazyYouTubeLoad;