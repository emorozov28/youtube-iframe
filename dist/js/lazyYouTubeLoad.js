export default class LazyYouTubeLoad{constructor({selector:t,button:e=null,bgImage:o=!0,qualityBg:i="hqdefault"}){this.selector=t,this.qualityBg=i,this.button=e,this.bgImage=o,this.captionText=[],this.init()}init(){const t=document.querySelectorAll(this.selector);if(t&&0===t.length)throw new Error(`Selector "${this.selector}" not found`);t.forEach(e=>{const o=e.getAttribute("data-video-link"),i="https://youtu.be/".length,r=o.substring(i,o.length);e.querySelector(".video-play").innerHTML=this.button,this.isBgImage(e,r),e.addEventListener("click",o=>{e.querySelector(".video-caption")?this.captionText.push(e.querySelector(".video-caption").textContent):this.captionText.push(null),t.forEach(t=>{if(t.querySelector("iframe")){t.querySelector("iframe").remove();const e=this.captionText[this.captionText.length-2],o=()=>null!==e?`<span class="video-caption">${this.captionText[this.captionText.length-2]}</span>`:"",i=`\n                            <button class="btn-video-play video-play">${this.button}</button>\n                            ${o()}\n                        `;t.innerHTML=i}}),o.preventDefault();const i=this.createIframe(r,1);e.appendChild(i),e.querySelector(".video-play")&&e.querySelector(".video-play").remove(),e.querySelector(".video-caption")&&e.querySelector(".video-caption").remove()})})}generateUrl(t,e){return`https://www.youtube.com/embed/${t}${`?rel=0&showinfo=0&autoplay=${e}`}`}createIframe(t,e){const o=document.createElement("iframe");return o.setAttribute("allowfullscreen",""),o.setAttribute("allow","autoplay; encrypted-media"),o.setAttribute("src",this.generateUrl(t,e)),o}isBgImage(t,e){if(this.bgImage){const o=`https://i.ytimg.com/vi/${e}/${this.qualityBg}.jpg`;console.log(o),t.style.backgroundImage=`url(${o})`}else t.removeAttribute("style")}}